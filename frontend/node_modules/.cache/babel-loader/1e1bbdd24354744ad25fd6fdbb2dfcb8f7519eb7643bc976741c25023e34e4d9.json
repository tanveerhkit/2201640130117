{"ast":null,"code":"var _env;import{Log}from\"@app/logging-middleware\";const BASE=((_env=process.env)===null||_env===void 0?void 0:_env.REACT_APP_BACKEND_URL)||\"http://localhost:8080\";export async function createShortUrl(req){var _req$shortcode;await Log(\"frontend\",\"debug\",\"api\",\"create request \".concat((_req$shortcode=req.shortcode)!==null&&_req$shortcode!==void 0?_req$shortcode:\"auto\"));const res=await fetch(\"\".concat(BASE,\"/shorturls\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(req)});const body=await res.json();if(!res.ok){var _body$error;await Log(\"frontend\",\"error\",\"api\",\"create failed \".concat((_body$error=body===null||body===void 0?void 0:body.error)!==null&&_body$error!==void 0?_body$error:res.status));throw new Error((body===null||body===void 0?void 0:body.error)||\"Failed to create short url\");}await Log(\"frontend\",\"info\",\"api\",\"create success\");return body;}export async function getStats(code){await Log(\"frontend\",\"debug\",\"api\",\"stats request \".concat(code));const res=await fetch(\"\".concat(BASE,\"/shorturls/\").concat(code));const body=await res.json();if(!res.ok){var _body$error2;await Log(\"frontend\",\"error\",\"api\",\"stats failed \".concat((_body$error2=body===null||body===void 0?void 0:body.error)!==null&&_body$error2!==void 0?_body$error2:res.status));throw new Error((body===null||body===void 0?void 0:body.error)||\"Failed to fetch stats\");}return body;}","map":{"version":3,"names":["Log","BASE","_env","process","env","REACT_APP_BACKEND_URL","createShortUrl","req","_req$shortcode","concat","shortcode","res","fetch","method","headers","body","JSON","stringify","json","ok","_body$error","error","status","Error","getStats","code","_body$error2"],"sources":["/Users/naushadvali/Desktop/tanveer/frontend/src/api/client.ts"],"sourcesContent":["import { Log } from \"@app/logging-middleware\";\n\nconst BASE = (process as any).env?.REACT_APP_BACKEND_URL || \"http://localhost:8080\";\n\nexport interface CreateReq {\n  url: string;\n  validity?: number;\n  shortcode?: string;\n}\n\nexport interface CreateResp {\n  shortLink: string;\n  expiry: string;\n}\n\nexport async function createShortUrl(req: CreateReq): Promise<CreateResp> {\n  await Log(\"frontend\", \"debug\", \"api\", `create request ${req.shortcode ?? \"auto\"}`);\n  const res = await fetch(`${BASE}/shorturls`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(req),\n  });\n  const body = await res.json();\n  if (!res.ok) {\n    await Log(\"frontend\", \"error\", \"api\", `create failed ${body?.error ?? res.status}`);\n    throw new Error(body?.error || \"Failed to create short url\");\n  }\n  await Log(\"frontend\", \"info\", \"api\", `create success`);\n  return body as CreateResp;\n}\n\nexport interface StatsResp {\n  shortcode: string;\n  url: string;\n  createdAt: string;\n  expiresAt: string;\n  totalClicks: number;\n  clicks: { timestamp: string; source: string; location: string }[];\n}\n\nexport async function getStats(code: string): Promise<StatsResp> {\n  await Log(\"frontend\", \"debug\", \"api\", `stats request ${code}`);\n  const res = await fetch(`${BASE}/shorturls/${code}`);\n  const body = await res.json();\n  if (!res.ok) {\n    await Log(\"frontend\", \"error\", \"api\", `stats failed ${body?.error ?? res.status}`);\n    throw new Error(body?.error || \"Failed to fetch stats\");\n  }\n  return body as StatsResp;\n}\n\n"],"mappings":"SAAA,OAASA,GAAG,KAAQ,yBAAyB,CAE7C,KAAM,CAAAC,IAAI,CAAG,EAAAC,IAAA,CAACC,OAAO,CAASC,GAAG,UAAAF,IAAA,iBAApBA,IAAA,CAAsBG,qBAAqB,GAAI,uBAAuB,CAanF,MAAO,eAAe,CAAAC,cAAcA,CAACC,GAAc,CAAuB,KAAAC,cAAA,CACxE,KAAM,CAAAR,GAAG,CAAC,UAAU,CAAE,OAAO,CAAE,KAAK,mBAAAS,MAAA,EAAAD,cAAA,CAAoBD,GAAG,CAACG,SAAS,UAAAF,cAAA,UAAAA,cAAA,CAAI,MAAM,CAAE,CAAC,CAClF,KAAM,CAAAG,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAH,MAAA,CAAIR,IAAI,eAAc,CAC3CY,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACV,GAAG,CAC1B,CAAC,CAAC,CACF,KAAM,CAAAQ,IAAI,CAAG,KAAM,CAAAJ,GAAG,CAACO,IAAI,CAAC,CAAC,CAC7B,GAAI,CAACP,GAAG,CAACQ,EAAE,CAAE,KAAAC,WAAA,CACX,KAAM,CAAApB,GAAG,CAAC,UAAU,CAAE,OAAO,CAAE,KAAK,kBAAAS,MAAA,EAAAW,WAAA,CAAmBL,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEM,KAAK,UAAAD,WAAA,UAAAA,WAAA,CAAIT,GAAG,CAACW,MAAM,CAAE,CAAC,CACnF,KAAM,IAAI,CAAAC,KAAK,CAAC,CAAAR,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEM,KAAK,GAAI,4BAA4B,CAAC,CAC9D,CACA,KAAM,CAAArB,GAAG,CAAC,UAAU,CAAE,MAAM,CAAE,KAAK,iBAAkB,CAAC,CACtD,MAAO,CAAAe,IAAI,CACb,CAWA,MAAO,eAAe,CAAAS,QAAQA,CAACC,IAAY,CAAsB,CAC/D,KAAM,CAAAzB,GAAG,CAAC,UAAU,CAAE,OAAO,CAAE,KAAK,kBAAAS,MAAA,CAAmBgB,IAAI,CAAE,CAAC,CAC9D,KAAM,CAAAd,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAH,MAAA,CAAIR,IAAI,gBAAAQ,MAAA,CAAcgB,IAAI,CAAE,CAAC,CACpD,KAAM,CAAAV,IAAI,CAAG,KAAM,CAAAJ,GAAG,CAACO,IAAI,CAAC,CAAC,CAC7B,GAAI,CAACP,GAAG,CAACQ,EAAE,CAAE,KAAAO,YAAA,CACX,KAAM,CAAA1B,GAAG,CAAC,UAAU,CAAE,OAAO,CAAE,KAAK,iBAAAS,MAAA,EAAAiB,YAAA,CAAkBX,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEM,KAAK,UAAAK,YAAA,UAAAA,YAAA,CAAIf,GAAG,CAACW,MAAM,CAAE,CAAC,CAClF,KAAM,IAAI,CAAAC,KAAK,CAAC,CAAAR,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEM,KAAK,GAAI,uBAAuB,CAAC,CACzD,CACA,MAAO,CAAAN,IAAI,CACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}