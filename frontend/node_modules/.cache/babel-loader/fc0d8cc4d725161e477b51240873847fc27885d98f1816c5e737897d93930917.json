{"ast":null,"code":"import _objectSpread from\"/Users/naushadvali/Desktop/tanveer/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Card,CardContent,Chip,Grid,Stack,Typography}from\"@mui/material\";import{useEffect,useState}from\"react\";import{getStats}from\"../api/client\";import{Log}from\"@app/logging-middleware\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function StatsPage(){const[codes,setCodes]=useState([]);const[stats,setStats]=useState({});useEffect(()=>{Log(\"frontend\",\"info\",\"page\",\"stats page open\");const stored=JSON.parse(localStorage.getItem(\"shortcodes\")||\"[]\");setCodes(stored);},[]);useEffect(()=>{async function run(){for(const code of codes){try{const data=await getStats(code);setStats(s=>_objectSpread(_objectSpread({},s),{},{[code]:{data}}));}catch(e){setStats(s=>_objectSpread(_objectSpread({},s),{},{[code]:{error:e.message}}));}}}if(codes.length)run();},[codes]);return/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Short URLs Statistics\"}),codes.length===0&&/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"No short URLs yet. Create some in the Shorten tab.\"}),codes.map(code=>{const entry=stats[code];const s=entry===null||entry===void 0?void 0:entry.data;return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\"/\",code]}),(entry===null||entry===void 0?void 0:entry.error)&&/*#__PURE__*/_jsx(Typography,{color:\"error\",children:entry.error}),s&&/*#__PURE__*/_jsxs(Stack,{spacing:1,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Original: \",s.url]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Created: \",new Date(s.createdAt).toLocaleString()]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Expires: \",new Date(s.expiresAt).toLocaleString()]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Total Clicks: \",/*#__PURE__*/_jsx(Chip,{label:s.totalClicks,color:\"primary\",size:\"small\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",children:\"Click Details\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:1,children:s.clicks.map((c,idx)=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Time: \",new Date(c.timestamp).toLocaleString()]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Source: \",c.source]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Location: \",c.location]})]})})},idx))})]})]})},code);})]});}","map":{"version":3,"names":["Card","CardContent","Chip","Grid","Stack","Typography","useEffect","useState","getStats","Log","jsx","_jsx","jsxs","_jsxs","StatsPage","codes","setCodes","stats","setStats","stored","JSON","parse","localStorage","getItem","run","code","data","s","_objectSpread","e","error","message","length","spacing","children","variant","map","entry","color","url","Date","createdAt","toLocaleString","expiresAt","label","totalClicks","size","container","clicks","c","idx","item","xs","md","timestamp","source","location"],"sources":["/Users/naushadvali/Desktop/tanveer/frontend/src/pages/StatsPage.tsx"],"sourcesContent":["import { Card, CardContent, Chip, Grid, Stack, Typography } from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport { getStats, StatsResp } from \"../api/client\";\nimport { Log } from \"@app/logging-middleware\";\n\nexport default function StatsPage() {\n  const [codes, setCodes] = useState<string[]>([]);\n  const [stats, setStats] = useState<Record<string, { data?: StatsResp; error?: string }>>({});\n\n  useEffect(() => {\n    Log(\"frontend\", \"info\", \"page\", \"stats page open\");\n    const stored = JSON.parse(localStorage.getItem(\"shortcodes\") || \"[]\");\n    setCodes(stored);\n  }, []);\n\n  useEffect(() => {\n    async function run() {\n      for (const code of codes) {\n        try {\n          const data = await getStats(code);\n          setStats((s) => ({ ...s, [code]: { data } }));\n        } catch (e: any) {\n          setStats((s) => ({ ...s, [code]: { error: e.message } }));\n        }\n      }\n    }\n    if (codes.length) run();\n  }, [codes]);\n\n  return (\n    <Stack spacing={2}>\n      <Typography variant=\"h6\">Short URLs Statistics</Typography>\n      {codes.length === 0 && <Typography variant=\"body1\">No short URLs yet. Create some in the Shorten tab.</Typography>}\n      {codes.map((code) => {\n        const entry = stats[code];\n        const s = entry?.data;\n        return (\n          <Card key={code}>\n            <CardContent>\n              <Typography variant=\"h6\">/{code}</Typography>\n              {entry?.error && <Typography color=\"error\">{entry.error}</Typography>}\n              {s && (\n                <Stack spacing={1}>\n                  <Typography variant=\"body2\">Original: {s.url}</Typography>\n                  <Typography variant=\"body2\">Created: {new Date(s.createdAt).toLocaleString()}</Typography>\n                  <Typography variant=\"body2\">Expires: {new Date(s.expiresAt).toLocaleString()}</Typography>\n                  <Typography variant=\"body2\">Total Clicks: <Chip label={s.totalClicks} color=\"primary\" size=\"small\" /></Typography>\n                  <Typography variant=\"subtitle1\">Click Details</Typography>\n                  <Grid container spacing={1}>\n                    {s.clicks.map((c, idx) => (\n                      <Grid item xs={12} md={6} key={idx}>\n                        <Card variant=\"outlined\">\n                          <CardContent>\n                            <Typography variant=\"body2\">Time: {new Date(c.timestamp).toLocaleString()}</Typography>\n                            <Typography variant=\"body2\">Source: {c.source}</Typography>\n                            <Typography variant=\"body2\">Location: {c.location}</Typography>\n                          </CardContent>\n                        </Card>\n                      </Grid>\n                    ))}\n                  </Grid>\n                </Stack>\n              )}\n            </CardContent>\n          </Card>\n        );\n      })}\n    </Stack>\n  );\n}\n\n"],"mappings":"gIAAA,OAASA,IAAI,CAAEC,WAAW,CAAEC,IAAI,CAAEC,IAAI,CAAEC,KAAK,CAAEC,UAAU,KAAQ,eAAe,CAChF,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,QAAQ,KAAmB,eAAe,CACnD,OAASC,GAAG,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9C,cAAe,SAAS,CAAAC,SAASA,CAAA,CAAG,CAClC,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAW,EAAE,CAAC,CAChD,KAAM,CAACU,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAuD,CAAC,CAAC,CAAC,CAE5FD,SAAS,CAAC,IAAM,CACdG,GAAG,CAAC,UAAU,CAAE,MAAM,CAAE,MAAM,CAAE,iBAAiB,CAAC,CAClD,KAAM,CAAAU,MAAM,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,EAAI,IAAI,CAAC,CACrEP,QAAQ,CAACG,MAAM,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAENb,SAAS,CAAC,IAAM,CACd,cAAe,CAAAkB,GAAGA,CAAA,CAAG,CACnB,IAAK,KAAM,CAAAC,IAAI,GAAI,CAAAV,KAAK,CAAE,CACxB,GAAI,CACF,KAAM,CAAAW,IAAI,CAAG,KAAM,CAAAlB,QAAQ,CAACiB,IAAI,CAAC,CACjCP,QAAQ,CAAES,CAAC,EAAAC,aAAA,CAAAA,aAAA,IAAWD,CAAC,MAAE,CAACF,IAAI,EAAG,CAAEC,IAAK,CAAC,EAAG,CAAC,CAC/C,CAAE,MAAOG,CAAM,CAAE,CACfX,QAAQ,CAAES,CAAC,EAAAC,aAAA,CAAAA,aAAA,IAAWD,CAAC,MAAE,CAACF,IAAI,EAAG,CAAEK,KAAK,CAAED,CAAC,CAACE,OAAQ,CAAC,EAAG,CAAC,CAC3D,CACF,CACF,CACA,GAAIhB,KAAK,CAACiB,MAAM,CAAER,GAAG,CAAC,CAAC,CACzB,CAAC,CAAE,CAACT,KAAK,CAAC,CAAC,CAEX,mBACEF,KAAA,CAACT,KAAK,EAAC6B,OAAO,CAAE,CAAE,CAAAC,QAAA,eAChBvB,IAAA,CAACN,UAAU,EAAC8B,OAAO,CAAC,IAAI,CAAAD,QAAA,CAAC,uBAAqB,CAAY,CAAC,CAC1DnB,KAAK,CAACiB,MAAM,GAAK,CAAC,eAAIrB,IAAA,CAACN,UAAU,EAAC8B,OAAO,CAAC,OAAO,CAAAD,QAAA,CAAC,oDAAkD,CAAY,CAAC,CACjHnB,KAAK,CAACqB,GAAG,CAAEX,IAAI,EAAK,CACnB,KAAM,CAAAY,KAAK,CAAGpB,KAAK,CAACQ,IAAI,CAAC,CACzB,KAAM,CAAAE,CAAC,CAAGU,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEX,IAAI,CACrB,mBACEf,IAAA,CAACX,IAAI,EAAAkC,QAAA,cACHrB,KAAA,CAACZ,WAAW,EAAAiC,QAAA,eACVrB,KAAA,CAACR,UAAU,EAAC8B,OAAO,CAAC,IAAI,CAAAD,QAAA,EAAC,GAAC,CAACT,IAAI,EAAa,CAAC,CAC5C,CAAAY,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEP,KAAK,gBAAInB,IAAA,CAACN,UAAU,EAACiC,KAAK,CAAC,OAAO,CAAAJ,QAAA,CAAEG,KAAK,CAACP,KAAK,CAAa,CAAC,CACpEH,CAAC,eACAd,KAAA,CAACT,KAAK,EAAC6B,OAAO,CAAE,CAAE,CAAAC,QAAA,eAChBrB,KAAA,CAACR,UAAU,EAAC8B,OAAO,CAAC,OAAO,CAAAD,QAAA,EAAC,YAAU,CAACP,CAAC,CAACY,GAAG,EAAa,CAAC,cAC1D1B,KAAA,CAACR,UAAU,EAAC8B,OAAO,CAAC,OAAO,CAAAD,QAAA,EAAC,WAAS,CAAC,GAAI,CAAAM,IAAI,CAACb,CAAC,CAACc,SAAS,CAAC,CAACC,cAAc,CAAC,CAAC,EAAa,CAAC,cAC1F7B,KAAA,CAACR,UAAU,EAAC8B,OAAO,CAAC,OAAO,CAAAD,QAAA,EAAC,WAAS,CAAC,GAAI,CAAAM,IAAI,CAACb,CAAC,CAACgB,SAAS,CAAC,CAACD,cAAc,CAAC,CAAC,EAAa,CAAC,cAC1F7B,KAAA,CAACR,UAAU,EAAC8B,OAAO,CAAC,OAAO,CAAAD,QAAA,EAAC,gBAAc,cAAAvB,IAAA,CAACT,IAAI,EAAC0C,KAAK,CAAEjB,CAAC,CAACkB,WAAY,CAACP,KAAK,CAAC,SAAS,CAACQ,IAAI,CAAC,OAAO,CAAE,CAAC,EAAY,CAAC,cAClHnC,IAAA,CAACN,UAAU,EAAC8B,OAAO,CAAC,WAAW,CAAAD,QAAA,CAAC,eAAa,CAAY,CAAC,cAC1DvB,IAAA,CAACR,IAAI,EAAC4C,SAAS,MAACd,OAAO,CAAE,CAAE,CAAAC,QAAA,CACxBP,CAAC,CAACqB,MAAM,CAACZ,GAAG,CAAC,CAACa,CAAC,CAAEC,GAAG,gBACnBvC,IAAA,CAACR,IAAI,EAACgD,IAAI,MAACC,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,CAAE,CAAAnB,QAAA,cACvBvB,IAAA,CAACX,IAAI,EAACmC,OAAO,CAAC,UAAU,CAAAD,QAAA,cACtBrB,KAAA,CAACZ,WAAW,EAAAiC,QAAA,eACVrB,KAAA,CAACR,UAAU,EAAC8B,OAAO,CAAC,OAAO,CAAAD,QAAA,EAAC,QAAM,CAAC,GAAI,CAAAM,IAAI,CAACS,CAAC,CAACK,SAAS,CAAC,CAACZ,cAAc,CAAC,CAAC,EAAa,CAAC,cACvF7B,KAAA,CAACR,UAAU,EAAC8B,OAAO,CAAC,OAAO,CAAAD,QAAA,EAAC,UAAQ,CAACe,CAAC,CAACM,MAAM,EAAa,CAAC,cAC3D1C,KAAA,CAACR,UAAU,EAAC8B,OAAO,CAAC,OAAO,CAAAD,QAAA,EAAC,YAAU,CAACe,CAAC,CAACO,QAAQ,EAAa,CAAC,EACpD,CAAC,CACV,CAAC,EAPsBN,GAQzB,CACP,CAAC,CACE,CAAC,EACF,CACR,EACU,CAAC,EA1BLzB,IA2BL,CAAC,CAEX,CAAC,CAAC,EACG,CAAC,CAEZ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}